# 開発者向け仕様書 (ラリーガ データ管理システム)

本システムは，スペインのプロサッカーリーグ「ラリーガ」のチーム，選手，および国籍情報を管理するためのシンプルなWebアプリケーションである．データは変数内に保持され，REST APIの原則に基づいた統一的な操作でCRUD（Create/Read/Update/Delete）操作を提供する．

## 1．データ構造

システムが扱う主要なデータ要素（エンティティ）と，その属性（フィールド）を定義する．

### 1．1．国データ (Country)

選手の国籍やチームの所在国を示すためのデータである．

| フィールド名 | データ型 | 説明 | 制約 |
| :--- | :--- | :--- | :--- |
| `id` | 整数 (int) | 国のユニークID | 主キー，自動採番 |
| `name_ja` | 文字列 (string) | 国名（日本語表記） | 必須 |
| `name_en` | 文字列 (string) | 国名（英語表記/コード） | 必須，ユニーク |

### 1．2．チームデータ (Team)

ラリーガに所属するクラブチームのデータである．

| フィールド名 | データ型 | 説明 | 制約 |
| :--- | :--- | :--- | :--- |
| `id` | 整数 (int) | チームのユニークID | 主キー，自動採番 |
| `name` | 文字列 (string) | チーム名（例: FCバルセロナ） | 必須，ユニーク |
| `city` | 文字列 (string) | チームの所在地（例: バルセロナ） | 必須 |
| `country_id` | 整数 (int) | チームの所在国ID（Country．idと連携） | 必須，外部キー |

### 1．3．選手データ (Player)

チームに所属する選手のデータである．

| フィールド名 | データ型 | 説明 | 制約 |
| :--- | :--- | :--- | :--- |
| `id` | 整数 (int) | 選手のユニークID | 主キー，自動採番 |
| `name` | 文字列 (string) | 選手名 | 必須 |
| `position` | 文字列 (string) | ポジション（例: FW，MF，DF，GK） | 必須 |
| `team_id` | 整数 (int) | 所属チームID（Team．idと連携） | 必須，外部キー |
| `nationality_id`| 整数 (int) | 国籍ID（Country．idと連携） | 必須，外部キー |

---

## 2．ページ遷移とAPI設計 (REST APIによる統一操作)

UI操作は，リソース名（teams，players，countries）に対してHTTPメソッド（GET，POST，PUT，DELETE）を割り当てる，REST APIに基づいた統一的な設計とする．

### 2．1．遷移図

チーム一覧を中心とした画面フロー．

```mermaid
stateDiagram-v2
    [*] --> チーム一覧
    チーム一覧 --> チーム詳細: チーム名クリック
    チーム詳細 --> チーム編集画面: 編集ボタン
    チーム編集画面 --> チーム詳細: 登録成功
    チーム一覧 --> チーム追加画面: 追加ボタン
    チーム追加画面 --> チーム詳細: 登録成功
    チーム詳細 --> 選手一覧: 所属選手リンク
    選手一覧 --> 選手詳細: 選手名クリック
    選手詳細 --> 選手編集画面: 編集ボタン
    選手編集画面 --> 選手詳細: 登録成功
    選手一覧 --> 選手追加画面: 追加ボタン
    選手追加画面 --> 選手詳細: 登録成功
    チーム詳細 --> チーム一覧: 削除成功